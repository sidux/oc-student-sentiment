name: Deploy to Railway

on:
    push:
        branches: [ "main" ]  # or whichever branch you want to deploy from

jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
            - name: Check out
              uses: actions/checkout@v3

            - name: Set up Python
              uses: actions/setup-python@v4
              with:
                  python-version: "3.12"

            - name: Install Poetry
              run: pip install poetry

            - name: Install Dependencies
              run: poetry install --no-interaction --no-ansi

            - name: Deploy to Railway
              env:
                  RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
              run: railway up
